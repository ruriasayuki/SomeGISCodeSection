<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>

    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
    <script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=1XjLLEhZhQNUzd93EjU5nOGQ"></script>
</head>
<body>
    <button onclick="mymove(endP)">移动测试</button>
    <div id="map"></div>
 <script> 
        var endP=new BMap.Point(120,30);
        var mybmap = new BMap.Map("map");
        mybmap.centerAndZoom(new BMap.Point(110, 40), 5);  // 初始化地图,设置中心点坐标和地图级别
	    mybmap.addControl(new BMap.MapTypeControl());   //添加地图类型控
        mybmap.enableScrollWheelZoom(true); 
        var newx;
        var newy;
        var newc;
        var dx;
        var dy;
        var mymarker = new BMap.Marker(new BMap.Point(110,40));
        mymarker.setLabel(new BMap.Label("李白"));
        mybmap.addOverlay(mymarker);
</script>
<script>
    function move(nowx,nowy,dx,dy,count)
        {
            mymarker.setPosition(new BMap.Point(nowx,nowy));
            newx = nowx+dx;
            newy = nowy+dy;
            newc = count-1;
            if(newc>0) setTimeout("move(newx,newy,dx,dy,newc)",100)
        }
function mymove(endPoint)
{
     var startPos = mymarker.getPosition();
        dx = (endPoint.lng-startPos.lng)/100;
        dy = (endPoint.lat-startPos.lat)/100;
        var nowx = startPos.lng+dx;
        var nowy = startPos.lat+dy;
    move(nowx,nowy,dx,dy,100);      
}

</script>
</body>
</html>
